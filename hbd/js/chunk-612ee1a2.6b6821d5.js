(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-612ee1a2"],{"735d":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"companyAdd",staticStyle:{display:"flex"}},[a("div",{staticStyle:{width:"12%","border-right":"1px solid #eee",padding:"1px 20px","margin-top":"30px"}},[a("el-timeline",e._l(e.activitieList,(function(t,r){return a("el-timeline-item",{key:r,attrs:{size:"normal"},nativeOn:{click:function(a){return e.changeStep(r+1,t.type)}}},[a("span",{class:"1"===t.type?"checkTimeIndex":"unchecktimeIndex",attrs:{slot:"dot"},slot:"dot"},[e._v(e._s(r+1))]),a("p",{class:"1"===t.type?"checkName":"uncheckName"},[e._v(e._s(t.name))])])})),1)],1),a("div",{staticClass:"win-page-box",staticStyle:{width:"85%"}},[a("div",[e._m(0),a("div",{directives:[{name:"show",rawName:"v-show",value:1===e.Step,expression:"Step === 1"}],staticStyle:{width:"100%"}},[a("el-form",{ref:"firmData",staticClass:"form-box",attrs:{model:e.firmData,rules:e.rules,"label-width":"160px"}},[a("el-form-item",{attrs:{label:"企业属性：",prop:"enterprise_attribute"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.firmData.enterprise_attribute,callback:function(t){e.$set(e.firmData,"enterprise_attribute",t)},expression:"firmData.enterprise_attribute"}},e._l(e.typeOp,(function(e){return a("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"单位名称：",prop:"entName"}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.firmData.entName,callback:function(t){e.$set(e.firmData,"entName",t)},expression:"firmData.entName"}})],1),a("el-form-item",{attrs:{label:"单位归属：",prop:"is_other_province"}},[a("el-select",{staticStyle:{width:"100%"},model:{value:e.firmData.is_other_province,callback:function(t){e.$set(e.firmData,"is_other_province",t)},expression:"firmData.is_other_province"}},[a("el-option",{attrs:{label:"本省单位",value:"0"}}),a("el-option",{attrs:{label:"外省单位",value:"1"}})],1)],1),a("el-form-item",{attrs:{label:"企业组织机构代码：",prop:"instCode"}},[a("el-input",{attrs:{placeholder:"请输入最少18位，最多30位的企业组织机构代码"},model:{value:e.firmData.instCode,callback:function(t){e.$set(e.firmData,"instCode",t)},expression:"firmData.instCode"}})],1),a("el-form-item",{attrs:{label:"单位简称：",prop:"shortName"}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.firmData.shortName,callback:function(t){e.$set(e.firmData,"shortName",t)},expression:"firmData.shortName"}})],1),a("el-form-item",{attrs:{label:"法定代表人：",prop:"legalName"}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.firmData.legalName,callback:function(t){e.$set(e.firmData,"legalName",t)},expression:"firmData.legalName"}})],1),a("el-form-item",{attrs:{label:"涉及业务：",prop:"sjywMsg"}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.firmData.sjywMsg,callback:function(t){e.$set(e.firmData,"sjywMsg",t)},expression:"firmData.sjywMsg"}})],1),a("el-form-item",{attrs:{label:"设施详细地址：",prop:"equipment_address"}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.firmData.equipment_address,callback:function(t){e.$set(e.firmData,"equipment_address",t)},expression:"firmData.equipment_address"}})],1),a("el-form-item",{attrs:{label:"单位地址：",prop:"registration_address"}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.firmData.registration_address,callback:function(t){e.$set(e.firmData,"registration_address",t)},expression:"firmData.registration_address"}})],1),a("el-form-item",{attrs:{label:"设施所在地环保局："}},[a("el-input",{attrs:{disabled:"",placeholder:"请输入内容"},model:{value:e.firmData.EpaName,callback:function(t){e.$set(e.firmData,"EpaName",t)},expression:"firmData.EpaName"}})],1),a("el-form-item",{attrs:{label:"设施经度：",prop:"equipment_longitude"}},[a("el-input",{attrs:{disabled:""},model:{value:e.firmData.equipment_longitude,callback:function(t){e.$set(e.firmData,"equipment_longitude",t)},expression:"firmData.equipment_longitude"}})],1),a("el-form-item",{attrs:{label:"设施纬度：",prop:"equipment_longitude"}},[a("el-input",{attrs:{disabled:""},model:{value:e.firmData.equipment_latitude,callback:function(t){e.$set(e.firmData,"equipment_latitude",t)},expression:"firmData.equipment_latitude"}},[a("el-button",{staticStyle:{color:"#fff","background-color":"#409eff","border-color":"#409eff","border-radius":"0px"},attrs:{slot:"append",type:"primary"},on:{click:function(t){return e.loadMap()}},slot:"append"},[e._v("获取经纬度")])],1)],1),a("el-form-item",{attrs:{label:"联系人：",prop:"contacts"}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.firmData.contacts,callback:function(t){e.$set(e.firmData,"contacts",t)},expression:"firmData.contacts"}})],1),a("el-form-item",{attrs:{label:"联系电话：",prop:"contactsTel"}},[a("el-input",{attrs:{placeholder:"请输入11位手机号码"},model:{value:e.firmData.contactsTel,callback:function(t){e.$set(e.firmData,"contactsTel",t)},expression:"firmData.contactsTel"}})],1),a("el-form-item",{attrs:{label:"年总产值：",prop:"total_output_value"}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.firmData.total_output_value,callback:function(t){e.$set(e.firmData,"total_output_value",t)},expression:"firmData.total_output_value"}},[a("template",{slot:"append"},[e._v("万元")])],2)],1),a("el-form-item",{attrs:{label:"职工总数：",prop:"staff_number"}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.firmData.staff_number,callback:function(t){e.$set(e.firmData,"staff_number",t)},expression:"firmData.staff_number"}},[a("template",{slot:"append"},[e._v("人")])],2)],1),a("el-form-item",{attrs:{label:"占地面积：",prop:"floor_space"}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.firmData.floor_space,callback:function(t){e.$set(e.firmData,"floor_space",t)},expression:"firmData.floor_space"}},[a("template",{slot:"append"},[e._v("平方米")])],2)],1),a("el-form-item",{attrs:{label:"注册资金：",prop:"floor_space"}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.firmData.money,callback:function(t){e.$set(e.firmData,"money",t)},expression:"firmData.money"}},[a("template",{slot:"append"},[e._v("万元")])],2)],1),a("el-form-item",{attrs:{label:"环保负责人姓名：",prop:"epb_head"}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.firmData.epb_head,callback:function(t){e.$set(e.firmData,"epb_head",t)},expression:"firmData.epb_head"}})],1),a("el-form-item",{attrs:{label:"专职环保人员数：",prop:"env_protection_person_count"}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.firmData.env_protection_person_count,callback:function(t){e.$set(e.firmData,"env_protection_person_count",t)},expression:"firmData.env_protection_person_count"}})],1),a("el-form-item",{attrs:{label:"传真号码：",prop:"fax"}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.firmData.fax,callback:function(t){e.$set(e.firmData,"fax",t)},expression:"firmData.fax"}})],1),a("el-form-item",{attrs:{label:"邮政编码：",prop:"zipCode"}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.firmData.zipCode,callback:function(t){e.$set(e.firmData,"zipCode",t)},expression:"firmData.zipCode"}})],1),a("el-form-item",{attrs:{label:"邮箱：",prop:"contactsEmail"}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.firmData.contactsEmail,callback:function(t){e.$set(e.firmData,"contactsEmail",t)},expression:"firmData.contactsEmail"}})],1),a("el-form-item",{attrs:{label:"单位网址：",prop:"website"}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.firmData.website,callback:function(t){e.$set(e.firmData,"website",t)},expression:"firmData.website"}})],1),a("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"涉及业务：",prop:"contain_type"}},[a("el-checkbox-group",{staticStyle:{width:"100%"},on:{change:e.changeqtyw},model:{value:e.firmData.contain_type,callback:function(t){e.$set(e.firmData,"contain_type",t)},expression:"firmData.contain_type"}},[a("el-checkbox",{attrs:{label:"1"},on:{change:function(t){return e.itemChange("1")}}},[e._v("POPs持久性有机物")]),a("el-checkbox",{attrs:{label:"2"},on:{change:function(t){return e.itemChange("2")}}},[e._v("渣场")]),a("el-checkbox",{attrs:{label:"3",disabled:""},on:{change:function(t){return e.itemChange("3")}}},[e._v("废弃危险化学品")]),a("el-checkbox",{attrs:{label:"4",disabled:""},on:{change:function(t){return e.itemChange("4")}}},[e._v("生活垃圾处置")]),a("el-checkbox",{attrs:{label:"5",disabled:""},on:{change:function(t){return e.itemChange("5")}}},[e._v("磷石膏")]),a("el-checkbox",{attrs:{label:"6",disabled:""},on:{change:function(t){return e.itemChange("6")}}},[e._v("食用菌")]),a("el-checkbox",{attrs:{label:"7"},on:{change:function(t){return e.itemChange("7")}}},[e._v("以上全无")])],1)],1)],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:2===e.Step,expression:"Step === 2"}],staticStyle:{width:"100%"}},[a("el-form",{ref:"popData",staticStyle:{width:"100%"},attrs:{model:e.PopData,rules:e.rules,"label-width":"260px"}},[a("el-form-item",{attrs:{label:"联系人：",prop:"contact"}},[a("el-input",{model:{value:e.PopData.contact,callback:function(t){e.$set(e.PopData,"contact",t)},expression:"PopData.contact"}})],1),a("el-form-item",{attrs:{label:"联系电话：",prop:"contactTel"}},[a("el-input",{attrs:{placeholder:"请输入11位手机号码"},model:{value:e.PopData.contactTel,callback:function(t){e.$set(e.PopData,"contactTel",t)},expression:"PopData.contactTel"}})],1)],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:3===e.Step,expression:"Step === 3"}],staticStyle:{width:"100%"}},[a("el-form",{ref:"zcData",attrs:{model:e.ZcData,rules:e.rules,"label-width":"200px"}},[a("el-form-item",{attrs:{label:"所属企业："}},[a("el-input",{attrs:{disabled:""},model:{value:e.ZcData.enterprise,callback:function(t){e.$set(e.ZcData,"enterprise",t)},expression:"ZcData.enterprise"}})],1),a("el-form-item",{attrs:{label:"矿种（主要成分）：",prop:"components"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择矿种",multiple:"",filterable:"","allow-create":""},model:{value:e.ZcData.components,callback:function(t){e.$set(e.ZcData,"components",t)},expression:"ZcData.components"}},e._l(e.kzList,(function(e){return a("el-option",{key:e,attrs:{value:e}})})),1)],1),a("el-form-item",{attrs:{label:"固废属性：",prop:"property"}},[a("el-input",{model:{value:e.ZcData.property,callback:function(t){e.$set(e.ZcData,"property",t)},expression:"ZcData.property"}})],1),a("el-form-item",{attrs:{label:"联系人：",prop:"contact"}},[a("el-input",{model:{value:e.ZcData.contact,callback:function(t){e.$set(e.ZcData,"contact",t)},expression:"ZcData.contact"}})],1),a("el-form-item",{attrs:{label:"渣场地址：",prop:"address"}},[a("el-input",{model:{value:e.ZcData.address,callback:function(t){e.$set(e.ZcData,"address",t)},expression:"ZcData.address"}})],1),a("el-form-item",{attrs:{label:"联系电话：",prop:"contactPhone"}},[a("el-input",{attrs:{placeholder:"请输入11位手机号码"},model:{value:e.ZcData.contactPhone,callback:function(t){e.$set(e.ZcData,"contactPhone",t)},expression:"ZcData.contactPhone"}})],1)],1)],1)])]),a("div",{staticClass:"submitBtn"},[a("el-button",{staticStyle:{"margin-left":"50px"},attrs:{type:"primary"},on:{click:function(t){return e.submitClick("firmData")}}},[e._v("提交")]),a("el-button",{staticStyle:{"margin-left":"50px"},on:{click:function(t){return e.closeFirm()}}},[e._v("取 消")])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.dialogVisible,expression:"dialogVisible"}],staticClass:"map-show-box"},[a("div",{staticClass:"map-tit"},[a("div",{staticClass:"map-tit-txt"},[a("div",[e._v("经度：")]),a("div",{staticStyle:{"margin-right":"20px"}},[a("el-input",{model:{value:e.firmData.equipment_longitude,callback:function(t){e.$set(e.firmData,"equipment_longitude",t)},expression:"firmData.equipment_longitude"}})],1),a("div",[e._v("纬度：")]),a("div",[a("el-input",{model:{value:e.firmData.equipment_latitude,callback:function(t){e.$set(e.firmData,"equipment_latitude",t)},expression:"firmData.equipment_latitude"}})],1)]),a("div",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("确定")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("返回")])],1)]),e._m(1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.dialogVisible,expression:"dialogVisible"}],staticClass:"modal"})])},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wordTips"},[a("p",[e._v("提示：变更企业属性会重置列表，请先选择企业属性再填写表格")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"map-box"},[a("div",{attrs:{id:"map-address"}})])}],l=a("bc3a"),s=a.n(l),o=a("4328"),n=a.n(o),c=(a("5bc0"),a("5eee")),u=a("a2c7"),m=a("4cdf"),p=a("f403"),d=a("d0e9"),g=a("2ef1"),f=a("5831"),b=a("480c"),h=a("3e6b"),v=a("6c77"),D=a("6cbf"),_=(a("256f"),{name:"CompanyAdd",components:{},data(){var e=(e,t,a)=>{const r=/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/;if(!t)return a(new Error("请输入邮箱"));r.test(t)?a():a(new Error("请输入正确的邮箱格式"))},t=(e,t,a)=>{const r=/^1[0-9]{10}$/;if(!t)return a(new Error("请输入联系电话"));r.test(t)?a():a(new Error("请输入正确的11位手机号码"))},r=(e,t,a)=>{const r=/^[0-9A-Z\-]*$/;if(!t)return a(new Error("请输入企业组织机构代码"));r.test(t)?a():a(new Error("请输入正确格式的企业组织机构代码【大写英文字母(半角)和数字(半角)】"))},i=(e,t,a)=>{t&&(/^\d+(\.\d{1,12})?$/.test(t)?a():a(new Error("请输入非负数字")))},l=(e,t,a)=>{t&&(/^\d+$/.test(t)?a():a(new Error("请输入非负整数")))},s=(e,t,a)=>{t&&(/^[1-9][0-9]{5}$/.test(t)?a():a(new Error("邮政编码只能有六位数字")))};return{map:null,center:[107.246058,26.644852],overlay:null,siteDesObj:{},overlayId:1,pointImage:a("0b50"),layers:{pointLayer:null,riverLayer:null,contourLayer:null,drawLayer:null},olUid:0,selectedFeature:null,plotFunctions:null,Step:1,firmData:{enterprise:[],contain_type:[],is_other_province:"",equipment_longitude:"",equipment_latitude:""},PopData:{},ZcData:{},dialogVisible:!1,kzList:["锡矿","铜矿","铅矿","煤矿"],activitieList:[{name:"基本信息",type:"1",value:"0"},{name:"POPs持久性有机物",type:"0",value:"1"},{name:"渣场",type:"0",value:"2"},{name:"废弃危险化学品",type:"0",value:"3"},{name:"生活垃圾处置",type:"0",value:"4"},{name:"磷石膏",type:"0",value:"5"},{name:"食用菌",type:"0",value:"6"},{name:"审核情况",type:"0",value:"7"}],typeOp:[{label:"产废单位",value:"QYSX_CF"},{label:"运输单位",value:"QYSX_YS"},{label:"处置单位",value:"QYSX_CZ"}],rules:{enterprise_attribute:[{required:!0,message:"请选择企业属性",trigger:"change"}],entName:[{required:!0,message:"请输入单位名称",trigger:"blur"}],is_other_province:[{required:!0,message:"请选择单位归属",trigger:["blur","change"]}],instCode:[{required:!0,validator:r,trigger:"blur"},{required:!0,max:30,min:18,message:"请输入正确位数(最少18位，最多30位)的企业组织机构代码",trigger:"blur"}],shortName:[{required:!0,message:"请输入单位简称",trigger:"blur"}],legalName:[{required:!0,message:"请输入单位法人",trigger:"blur"}],sjywMsg:[{required:!0,message:"请选择涉及业务",trigger:"blur"}],annual_waste_scale:[{required:!0,message:"请选择危废产废规模",trigger:"change"}],equipment_longitude:[{required:!0,message:"请获取经纬度",trigger:"change"}],equipment_address:[{required:!0,message:"请输入设施详细地址",trigger:"blur"}],registrationAreaCode:[{required:!0,message:"请输入所属管辖环保局行政区",trigger:"blur"}],registration_address:[{required:!0,message:"请输入单位地址",trigger:"blur"}],business_licence_no:[{required:!0,message:"请输入营业执照注册号",trigger:"blur"}],epb_head:[{required:!0,message:"请输入环保负责人姓名",trigger:"blur"}],env_protection_person_count:[{required:!0,message:"请输入专职环保人员数",trigger:"blur"},{validator:l,required:!0,trigger:"blur"}],staff_number:[{required:!0,message:"请输入职工总数",trigger:"blur"},{validator:l,required:!0,trigger:"blur"}],floor_space:[{required:!0,message:"请输入占地面积（平方米）",trigger:"blur"},{validator:i,required:!0,trigger:"blur"}],total_output_value:[{required:!0,message:"请输入年总产值（万元）",trigger:"blur"},{validator:i,required:!0,trigger:"blur"}],contacts:[{required:!0,message:"请输入联系人",trigger:"blur"}],contactsTel:[{required:!0,validator:t,trigger:"blur"}],fax:[{required:!0,message:"请输入传真号码,如果没有,请填无",trigger:"blur"}],zipCode:[{required:!0,message:"请输入邮政编码",trigger:"blur"},{validator:s,required:!0,trigger:"blur"}],contactsEmail:[{required:!0,validator:e,trigger:"blur"}],website:[{required:!0,message:"请输入单位网址,如果没有,请填无",trigger:"blur"}],industry:[{required:!0,message:"请选择行业类别",trigger:"change"}],enterprise_type:[{required:!0,message:"请输入单位类型",trigger:"change"}],registered_capital:[{required:!0,message:"请输入注册资金（万元）",trigger:"blur"},{validator:i,required:!0,trigger:"blur"}],product_sales_volume:[{required:!0,message:"请输入产品销售额（万元）",trigger:"blur"},{validator:i,required:!0,trigger:"blur"}],gross_investment:[{required:!0,message:"请输入总投资（万元）",trigger:"blur"},{validator:i,required:!0,trigger:"blur"}],firmDataEpaName:[{required:!0,message:"请输入设施环保局地址",trigger:"blur"}],contain_type:[{required:!0,message:"请选择其他业务",trigger:"blur"}],contact:[{required:!0,message:"请输入联系人",trigger:"blur"}],contact_tel:[{required:!0,validator:t,trigger:"blur"}],contactTel:[{required:!0,validator:t,trigger:"blur"}],contactPhone:[{required:!0,validator:t,trigger:"blur"}],components:[{required:!0,message:"请选择矿种",trigger:"blur"}],property:[{required:!0,message:"请输入固废属性",trigger:"blur"}],address:[{required:!0,message:"请输入渣场地址",trigger:"blur"}],wasteName:[{required:!0,message:"请选择危险化学品名称",trigger:"blur"}],status:[{required:!0,message:"请输入预处理及贮存情况",trigger:"blur"}],features:[{required:!0,message:"请选择危险特性",trigger:"blur"}],facilityName:[{required:!0,message:"请输入生活垃圾处置设施名称",trigger:"blur"}],areaCode:[{required:!0,message:"请选择所在市（州）",trigger:"blur"}],treatmentProcess:[{required:!0,message:"请选择处理工艺",trigger:"blur"}],completionTime:[{required:!0,message:"请选择建成时间",trigger:"blur"}],operationTime:[{required:!0,message:"请选择投运时间",trigger:"blur"}],designCapacity:[{required:!0,message:"请输入处理设施能力",trigger:"blur"},{validator:i,required:!0,trigger:"blur"}],leachateTreatmentCapacity:[{required:!0,message:"请输入渗滤液处理能力",trigger:"blur"},{validator:i,required:!0,trigger:"blur"}],actualLeachateTreatmentCapacity:[{required:!0,message:"请输入渗滤液实际处理量",trigger:"blur"},{validator:i,required:!0,trigger:"blur"}],isNormalOperation:[{required:!0,message:"请选择设施是否正常运行",trigger:"blur"}],isStopUse:[{required:!0,message:"请选择是否停用",trigger:"blur"}]}}},methods:{changeStep(e,t){console.log(e,t),this.Step=e,"1"===t&&(2===e?(""===this.PopData.contact&&(this.PopData.contact=this.firmData.contacts),""===this.PopData.contactTel&&(this.PopData.contactTel=this.firmData.contactsTel)):3===e?(this.ZcData.enterprise=this.firmData.entName,""===this.ZcData.contact&&(this.ZcData.contact=this.firmData.contacts),""===this.ZcData.contactPhone&&(this.ZcData.contactPhone=this.firmData.contactsTel)):7===e&&(""===this.SyjData.contact&&(this.SyjData.contact=this.firmData.contacts),""===this.SyjData.contactTel&&(this.SyjData.contactTel=this.firmData.contactsTel)))},changeqtyw(e){let t=this.activitieList;for(let a=1;a<t.length;a++){this.activitieList[a].type="0";for(let t=0;t<e.length;t++)e[t]===this.activitieList[a].value&&(this.activitieList[a].type="1")}},itemChange(e){"7"===e?this.firmData.contain_type=["7"]:0===this.firmData.contain_type.indexOf("7")&&this.firmData.contain_type.splice(0,1)},submitClick(e){this.$refs[e].validate(e=>{if(!e)return this.$message({message:"请填写完基本信息",type:"warning"}),console.log("error submit!!"),!1;"7"===this.firmData.contain_type[0]?this.submit():this.firmData.contain_type.forEach(e=>{"1"===e?this.$refs["popData"].validate(e=>{if(!e)return this.$message({message:"请点击左侧POPs持久性有机物，把相关信息填写完整！",type:"warning"}),console.log("error submit!!"),!1;this.firmData.enterprisePopsInfo=this.PopData,this.submit()}):"2"===e&&this.$refs["zcData"].validate(e=>{if(!e)return this.$message({type:"error",message:"请点击左侧渣场，把相关信息填写完整！"}),!1;this.firmData.entInfoSlagFieldBaseInformation=this.ZcData,this.submit()})})})},submit(){s.a.post("/api",n.a.stringify(this.firmData,{arrayFormat:"indices",allowDots:!0})).then(e=>{console.log(e.data),e.data.ret}).catch(e=>{console.log(e)})},loadMap(){this.dialogVisible=!0,this.$nextTick(()=>{this.initMap()})},initMap(){this.map=new c["a"]({target:"map-address",layers:[new b["a"]({source:new d["a"],crossOrigin:"anonymous"}),new b["a"]({source:new g["a"]({url:"http://t0.tianditu.com/DataServer?T=img_w&x={x}&y={y}&l={z}&tk=469cfd9c133f30baaf3f94a9cd848c47",crossOrigin:"anonymous"})}),new b["a"]({source:new g["a"]({url:"http://t1.tianditu.com/DataServer?T=cia_w&x={x}&y={y}&l={z}&tk=469cfd9c133f30baaf3f94a9cd848c47",crossOrigin:"anonymous"})})],view:new u["a"]({center:this.center,zoom:7.8,minZoom:7,maxZoom:18,projection:"EPSG:4326"})}),this.layers.pointLayer=new h["a"]({source:new f["a"],renderMode:"vector",updateWhileInteracting:!0,updateWhileAnimating:!0}),this.map.addLayer(this.layers.pointLayer),this.layers.pointLayer.setZIndex(0),this.map.on("click",e=>{console.log(Math.round(1e6*e.coordinate[0])/1e6);let t=Math.round(1e6*e.coordinate[0])/1e6,a=Math.round(1e6*e.coordinate[1])/1e6;this.addPoint(t,a)})},addPoint(e,t,a){let r=this.layers.pointLayer.getSource();this.olUid>0&&(r.removeFeature(r.getFeatureById(this.olUid)),this.olUid=this.olUid-1);const i=new m["a"]({geometry:new p["a"]([e,t]),type:"point"});i.setStyle(new v["c"]({image:new D["a"]({src:this.pointImage,anchor:[.5,.5]}),zIndex:110})),this.olUid=this.olUid+1,i.setId(this.olUid),this.firmData.equipment_longitude=e,this.firmData.equipment_latitude=t,this.layers.pointLayer.getSource().addFeature(i)}},mounted(){}}),y=_,q=(a("b0b5"),a("2877")),w=Object(q["a"])(y,r,i,!1,null,null,null);t["default"]=w.exports},b0b5:function(e,t,a){"use strict";a("b551")},b551:function(e,t,a){}}]);