(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-191b8dc6"],{"27da":function(e,t,a){},"45d1":function(e,t,a){e.exports=a.p+"img/BUS2.89ef21d1.png"},8616:function(e,t,a){"use strict";a("27da")},f3b3:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{width:"100%",height:"889px",position:"relative"}},[a("div",{attrs:{id:"MAps"}}),a("div",{staticClass:"input-card form-box"},[a("el-row",[a("el-col",{attrs:{span:13}},[a("el-autocomplete",{staticClass:"inline-input",attrs:{"fetch-suggestions":e.querySearch,placeholder:"请输入公交车站","trigger-on-focus":!1},on:{select:e.handleSelect},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.item;return[a("div",{staticClass:"name"},[e._v(e._s(n.name))])]}}]),model:{value:e.form.busStop,callback:function(t){e.$set(e.form,"busStop",t)},expression:"form.busStop"}})],1),a("el-col",{attrs:{span:7}},[a("el-input",{attrs:{placeholder:"请输入公交车号"},model:{value:e.form.busNumber,callback:function(t){e.$set(e.form,"busNumber",t)},expression:"form.busNumber"}})],1),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{type:"primary"},on:{click:e.Search}},[e._v("查询")])],1)],1)],1),a("div",{attrs:{id:"tip"}})])},i=[],o={name:"Bus",data(){return{map:{},busStop:"",form:{},markers:[],busImg:a("45d1"),queryResult:[]}},components:{},methods:{initMaps(){this.map=new AMap.Map("MAps",{center:[112.939981,28.231061],layers:[new AMap.TileLayer.RoadNet],zoom:13})},createFilter(e){return t=>0===t.value.toLowerCase().indexOf(e.toLowerCase())},handleSelect(e){console.log(e)},Search(){this.stationSearch(),this.lineSearch()},stationSearch(e){let t=this;if(this.markers=[],e){var a=new AMap.StationSearch({pageIndex:1,pageSize:60,city:"183"});a.search(e,(function(e,a){"complete"===e&&"OK"===a.info&&(console.log(a),t.stationSearch_CallBack(a))}))}},querySearch(e,t){this.stationSearch(e),this.$nextTick(()=>{var e=this.queryResult;console.log(e),t(e)})},stationSearch_CallBack(e){this.queryResult=e.stationInfo;let t=e.stationInfo,a=t.length;if(a>0){for(let e=0;e<a;e++){console.log(t[e].location);var n=new AMap.Marker({icon:new AMap.Icon({image:this.busImg,size:new AMap.Size(32,32),imageSize:new AMap.Size(32,32)}),offset:new AMap.Pixel(-16,-32),position:t[e].location,map:this.map,title:t[e].name});n.info=new AMap.InfoWindow({content:t[e].name,offset:new AMap.Pixel(0,-30)}),n.on("mouseover",(function(e){e.target.info.open(this.map,e.target.getPosition())})),this.markers.push(n)}this.map.setFitView()}},lineSearch(){let e,t=this,a=this.form.busNumber;a&&(e||(e=new AMap.LineSearch({pageIndex:1,city:"长沙",pageSize:1,extensions:"all"})),e.search(a,(function(e,a){t.map.clearMap(),"complete"===e&&"OK"===a.info?t.lineSearch_Callback(a):alert(a)})))},lineSearch_Callback(e){let t=this,a=e.lineInfo,n=e.lineInfo.length;if(0==n);else for(let i=0;i<n;i++){let e=a[i].path,n=a[i].via_stops,o=n[0].location,s=n[n.length-1].location;0==i&&t.drawbusLine(o,s,e)}},drawbusLine(e,t,a){new AMap.Marker({map:this.map,position:e,icon:"https://webapi.amap.com/theme/v1.3/markers/n/start.png",zIndex:10,anchor:"top-left"}),new AMap.Marker({map:this.map,position:t,icon:"https://webapi.amap.com/theme/v1.3/markers/n/end.png",zIndex:10,anchor:"top-left"});let n=new AMap.Polyline({map:this.map,path:a,strokeColor:"#09f",strokeOpacity:.8,isOutline:!0,outlineColor:"white",strokeWeight:6});this.map.setFitView(n,!0,[60,200,60,60])}},mounted(){this.initMaps()}},s=o,r=(a("8616"),a("2877")),l=Object(r["a"])(s,n,i,!1,null,null,null);t["default"]=l.exports}}]);